<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Shakespeare Story Generator</title>
</head>
<body>

				<!-- let randomNumber2 = Math.floor(Math.random() * 5) + 1
							if (randomNumber2 !== randomNumber1) {
								speaker2.textContent = speakers[randomNumber2]
							} -->

			<!-- let randomNumber1 = Math.floor(Math.random() * 5) + 1 -->

			<!-- const numbers = new Set();
						while (numbers.size < 6) {
							const randomNum = Math.floor(Math.random() * 5) + 1;
							numbers.add(randomNum);
						  } -->
	<h1>Shakespeare Story Generator</h1>
	<p>Let's generate a story for you</p>
	<button>Generate Story</button>
	<br>
	<section class="resultParas">
		<br>
		<h3 class="speaker1"></h3>
		<p class="speech1"></p>
		<br>
		<h3 class="speaker2"></h3>
		<p class="speech2"></p>
		<br>
		<h3 class="speaker3"></h3>
		<p class="speech3"></p>
		<br>
		<h3 class="speaker4"></h3>
		<p class="speech4"></p>
		<br>
		<h3 class="speaker5"></h3>
		<p class="speech5"></p>
	</section>
	<script>

		// declare variables from the main html

		const speaker1 = document.querySelector(".speaker1");
		const speaker2 = document.querySelector(".speaker2");
		const speaker3 = document.querySelector(".speaker3");
		const speaker4 = document.querySelector(".speaker4");
		const speaker5 = document.querySelector(".speaker5");

		// Create a function that takes in csv files with matrices in them.

		async function loadMatrixFromCSV(filePath) {
				try {
					const response = await fetch(filePath);
					if (!response.ok) throw new Error(`Failed to fetch ${filePath}`);
					const csvText = await response.text();

					const parsed = Papa.parse(csvText.trim(), { skipEmptyLines: true });
					const data = parsed.data;

					const matrix = data.slice(1).map(row =>
						row.slice(1).map(cell => parseFloat(cell))
					);

					return matrix;
				} catch (error) {
					console.error(`‚ùå Error loading ${filePath}:`, error);
					return null;
				}
			}

		// Declare the matrices as variables

		const speaker_transition_matrix = await loadMatrixFromCSV('speaker_transition_matrix.csv');

		const all_transition_matrix = await loadMatrixFromCSV('all_transition_matrix.csv');

		const first_citizen_transition_matrix = await loadMatrixFromCSV('first_citizen_transition_matrix.csv');

		const second_citizen_transition_matrix = await loadMatrixFromCSV('second_citizen_transition_matrix.csv');

		const menenius_transition_matrix = await loadMatrixFromCSV('menenius_transition_matrix.csv');

		const marcius_transition_matrix = await loadMatrixFromCSV('marcius_transition_matrix.csv');


		function generator() {

			let speakers = ['All', 'First Citizen', 'Second Citizen', 'Menenius', 'Marcius']
			
			let random_array = [3,2,1,0,4];


			speaker1.textContent = speakers[random_array[0]]
			speaker2.textContent = speakers[random_array[1]]
			speaker3.textContent = speakers[random_array[2]]
			speaker4.textContent = speakers[random_array[3]]
			speaker5.textContent = speakers[random_array[4]]
			
		}

		const button = document.querySelector("button");
		button.addEventListener('click', generator);
	</script>
</body>
</html>